{% extends "base.html" %}
{% block body %}
<div id="searchOverlay" class="overlay">
    <span class="closebtn" onclick="closeSearch()" title="Close Overlay">Ã—</span>
    <div class="overlay-content">
        <form action="profile/search">
            <input type="text" placeholder="Wie zoek je?" name="search">
            <button type="submit" onclick="closeSearch()"><i class="fa fa-search"></i></button>
        </form>
    </div>
</div>
<div class="page-content">
    <div class="right-side">
        <aside class="default-section">
            <div class="profile-header">
                <div class="header-content flex-container flex-vertical-center">
                    <img src="{{fpath}}/avatarimage?figure={{data.player.look}}&direction=2&gesture=sml&size=l" alt="{{data.player.username}}" class="pixelated">
                    <div class="header-details">
                        <div class="header-title">{{data.player.username}}</div>
                        <div class="header-description">{{data.player.motto}}</div>
                    </div>
                </div>
            </div>
            <div class="aside-content">
                <div class="profile-content">
                    <div class="details-container register">{{shortname}} sinds <b>{{data.player.account_created|time_diff}}</b></div>
                    {% if data.player.settings.hide_online == 0 or 'housekeeping' in permissions %}
                        <div class="details-container status">Momenteel <strong class="{% if data.player.online == 0 %}offline{% set status = 'offline' %}{% else %}online{% set status = 'online' %}{% endif %}">{{status}}</strong></div>
                    {% else %}
                        <div class="details-container status">Momenteel <strong class="offline">offline</strong></div>
                    {% endif %}

                    {% if data.player.settings.hide_last_online == 0 or 'housekeeping' in permissions %}
                    <div class="details-container last_login">{% if data.player.last_online == 0 %}Nog niet online geweest{% else %}Laatste bezoek <strong>{{data.player.last_online}}</strong>{% endif %}</div>
                    {% endif %}
                </div>
            </div>
        </aside>

        <div class="guestbook"></div>
        <article class="default-section">
            <div class="aside-title-content">
                Gastenboek
            </div>
            <div class="aside-desc-content">Laat jij wacht achter?</div>
            <div class="aside-content">
            {% if player %}
            <div class="form-group has-feedback">
                <input type="text"  class="rounded-input blue-active addfeedreaction" placeholder="{% if data.player.username == player.username %}Wat ben je aan het doen, {{data.player.username}}? {% else %}Wat wil je {{data.player.username}} laten weten?{% endif %}" maxlength="50">
                <!--<span class="fas fa-camera feedback" aria-hidden="true"></span>!-->
            </div>
            {% endif %}

            <style>
                a {
                    text-decoration: none;
                }
            </style>
            <div class="profile-content" style="margin-top: 20px">
                <div class="feeds">
                    {% for feed in data.player.feeds %}
                    <div class="feed-item" data-id="{{feed.id}}" id="{{feed.id}}">
                        <div class="fi-avatar logo" style="margin-right: 0;height: 60px; margin-top: -7px;">
                            <div style="background: url({{fpath}}/avatarimage?figure={{feed.look}}.&amp;direction=3&amp;headonly=1) no-repeat center; width: 48px; height: 87px;"></div>
                        </div>
                        <div class="fi-content">
                            <div class="fc-user">
                                <div class="user-style"><span class="user-style black"><span class="user-icon cog"></span><a href="{{path}}/profile/{{feed.username}}">{{feed.username}}</a></span></div>
                                -
                                <span data-toggle="tooltip" data-placement="right" title="" data-original-title="{{feed.timestamp|time_diff}}"><small>{{feed.timestamp|time_diff}}</small></span>
                            </div>
                            <div class="fc-content">{{feed.message|bbcode}}</div>
                            <div class="fc-tools" data-id="{{feed.id}}">
                                <a href="#" class="likes-count fc-like" data-id="{{feed.id}}">{{feed.likes}}</a> <a href="#" class="fc-like" data-id="{{feed.id}}" style="margin-right:10px;">
                                    <i class="fa fa-heart"  data-id="{{feed.id}}" style="color: #D67979;"></i>
                                </a>

                                {% if player.id == data.player.id %}
                                    <a href="#"><i class="fa fa-remove" data-id="{{feed.id}}" style="color: #7B7777;"></i></a>&nbsp;
                                {% else %}
                                    <a href="#"><i class="fa fa-flag" data-id="{{feed.id}}" data-report="feed" style="color: #7B7777;"></i></a>&nbsp;
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <input type="hidden" name="userid" value="{{data.player.id}}">
            {% if data.player.feeds|length >= 4 %}
            <div class="load-more-button" style="margin: 0 auto;">
                <button class="rounded-button" data-id="{{data.player.id}}">Meer berichten laden</button>
            </div>
            {% endif %}
          </div>
        </article>
    </div>

    <div class="left-side">
        <div class="badges"></div>
        <article class="default-section" data-section="badges">
            <div class="aside-title-content">
                Badges
            </div>
            <div class="aside-desc-content">Laat jij wacht achter?</div>
            <div class="aside-content">
                <div class="items-container">
                    {% if data.player.badges %}
                        {% for row in data.player.badges %}
                        <div class="item-container">
                            <div class="item-icon pixelated" style="background-image: url({{cpath}}/library/c_images/album1584/{{row.badge_code}}.gif);"></div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <p>Heeft nog geen badges ingesteld</p>
                    {% endif %}
                </div>
            </div>
        </article>

        <div class="friends"></div>
        <article class="default-section" data-section="friends">
              <div class="aside-title-content">
                Vrienden
            </div>
            <div class="aside-desc-content">Willekeurige vrienden in mjin lijst</div>
            <div class="aside-content">
                <div class="items-container">
                    {% if data.player.friends %}
                        {% for row in data.player.friends %}
                        <a href="{{path}}/profile/{{row.username}}" class="item-container">
                            <div class="item-icon pixelated" style="background-image: url({{fpath}}/avatarimage?figure={{row.look}}&direction=2);"></div>
                            <div class="item-name">{{row.username}}</div>
                        </a>
                        {% endfor %}
                    {% else %}
                        <p>Heeft nog geen vrienden gemaakt</p>
                    {% endif %}
                </div>
            </div>
        </article>

        <div class="groups"></div>
        <article class="default-section" data-section="groups">
            <div class="aside-title-content">
                Groepen
            </div>
            <div class="aside-desc-content">Zie waar ik van houdt!</div>
            <div class="aside-content">
                <div class="items-container">
                    {% if data.player.groups %}
                        {% for row in data.player.groups %}
                        <a href="{{path}}/hotel?room={{row.room_id}}" class="item-container">
                            <div class="item-icon pixelated" style="background-image: url({{fpath}}/badge/{{row.badge}}.gif);"></div>
                            <div class="item-name">{{row.name}}</div>
                        </a>
                        {% endfor %}
                    {% else %}
                        <p>Heeft zich nog niet aangesloten bij onze groepen</p>
                    {% endif %}
                </div>
            </div>
        </article>

        <div class="rooms"></div>
        <article class="default-section" data-section="rooms">
            <div class="aside-title-content">
                Kamers
            </div>
            <div class="aside-desc-content">Mijn laatst aangemaakte kamers</div>
            <div class="aside-content">
                <div class="items-container">
                    {% if data.player.rooms %}
                        {% for row in data.player.rooms %}
                        <a href="{{path}}/hotel?room={{row.id}}" class="item-container">
                            <div class="item-icon pixelated" style="background-image: url({{cpath}}/library/camera/thumbnails/{{row.id}}.png);"></div>
                            <div class="item-name">{{row.name}}</div>
                        </a>
                        {% endfor %}
                    {% else %}
                        <p>Heeft nog geen kamers aangemaakt</p>
                    {% endif %}
                </div>
            </div>
        </article>
        
        <div class="photos"></div>
        <article class="default-section" data-section="photos">
            <div class="aside-title-content">
                Foto's
            </div>
            <div class="aside-desc-content">Kom jij met mij op de foto?</div>
                <div class="aside-content">
                <div class="items-container">
                    {% if data.player.photos %}
                        {% for row in data.player.photos %}
                        <a href="{{row.url}}" class="item-container photos" target="_blank" data-title="{{row.timestamp}}" data-player="{{row.user_id}}" data-id="{{row.id}}">
                            <div class="item-icon pixelated" style="background-image: url({{row.url}});"></div>
                        </a>
                        {% endfor %}
                    {% else %}
                        <p>Heeft nog geen foto's gemaakt</p>
                    {% endif %}
                </div>
            </div>
        </article>
    </div>
</div>
{% endblock %}